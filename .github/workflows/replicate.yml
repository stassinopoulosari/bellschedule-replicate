name: Scrape Classroom Data/Deploy ICL
run-name: Scrape & deploy by @ucsd-itslead
on:
  schedule:
    # Run at 06:00, 12:00, 15:00 every day
    - cron: "0 13,19,22 * * *"
jobs:
  scrape:
    runs-on: ubuntu-latest
    steps:
      - name: Set default branch name to `main`
        run: git config --global init.defaultBranch main
      - name: Check out main repo
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GH_TOKEN }}
      - name: Set Git config
        run: |
          git config --global user.email "hello@ari-s.com"
          git config --global user.name "Ari Stassinopoulos"
      - name: Replicate
        run: |
          curl https://ubsa-fb.firebaseio.com/schools/dublinHS.json > ./dublinHS.json
          git add .
          git commit -m "Build at `date -Iseconds`"
          git push origin main
